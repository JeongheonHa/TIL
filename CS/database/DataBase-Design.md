# 데이터베이스 설계
<img src="https://user-images.githubusercontent.com/108064146/215971289-ab503a9f-63db-4caa-bae4-2659daf7ffdb.png">

## 1. 설계 1단계: 요구 사항 분석
- 목적: 사용자의 요구 사항을 수집하고 분석하여 개발할 데이터베이스의 용도를 파악
- 결과물: 요구 사항 명세서

## 2. 설계 2단계: 개념적 설계
- 목적: DBMS에 독립적인 개념적 스키마 설계
- 결과물: 개념적 스키마(E-R 다이어그램)

### 2.1 작업 과정
- 1단계: 개체 추출, 각 개체의 주요 속성과 키 속성 선별
- 2단계: 개체 간의 관계 결정
- 3단계: E-R 다이어그램으로 표현

#### 1단계: 개체와 속성 추출
개체: 저장할만한 가치가 있는 중요 데이터를 가진 사람이나 사물 등 <br>

##### 개체 추출 방법
1. 요구 사항 문장에서 업무와 관련된 `명사`를 찾는다.
    - 업무와 관련이 적은 일반적이고 광범위한 의미의 명사는 제외
    - 의미가 같은 명사가 여러 개일 경우 `대표 명사 하나만 선택`
2. 찾아낸 명사를 `개체`와 `속성`으로 분류

#### 2단계: 관계 추출
관계: 개체 간의 의미 있는 연관성

##### 관계 추출 방법
1. 요구 사항 문장에서 개체 간의 연관성을 의미 있게 표현한 `동사`를 찾는다.
    - 의미가 같은 동사가 여러 개일 경우 `대표 명사 하나만 선택`
2. 찾아낸 관계에 대해 `매핑 카디널리티`와 `참여 특성`을 결정

#### 3단계: E-R 다이어그램 작성

## 3. 설계 3단계: 논리적 설계
E-R 다이어그램을 릴레이션 스키마로 변환
- 목적: DBMS에 적합한 논리적 스키마 설계
- 결과물: 논리적 스키마(릴레이션 스키마)

### 3.1 논리적 설계의 규칙 (순서대로 적용)

#### 규칙1: 모든 개체는 릴레이션으로 변환한다.
- 개체의 `이름`, `속성`, `키 속성`을 릴레이션의 `이름`, `속성`, `기본키`로 변환
- 개체의 속성이 복합 속성인 경우 복합 속성을 구성하고 있는 단순 속성만 릴레이션의 속성으로 변환

#### 규칙2: 다대다 관계는 릴레이션으로 변환한다.
- 관계의 `이름`, `속성`을 릴레이션의 `이름`, `속성`으로 변환
- 관계에 참여하는 개체의 기본키를 관계 릴레이션에 포함시켜 외래키로 지정하고 왜래키들을 조합하여 관계 릴레이션의 `기본키`로 지정
- 또는 외래키들을 놓아두고 별도의 기본키를 만들어 사용

#### 규칙3: 일대다 관계는 외래키로 표현한다.
- 일대다 관계에서 1측 개체 릴레이션의 기본키를 n측 개체 릴레이션에 포함시켜 외래키로 지정 (반대로하면 원자성 위반)
- 관계의 속성을 n측 개체 릴레이션에 포함
- 약한 개체가 참여하는 일대다 관계는 외래키를 포함해서 기본키로 지정

#### 규칙4: 일대일 관계는 외래키로 표현한다.
- 일반적인 일대일 관계는 외래키를 서로 주고 받고 둘다 관계의 속성을 포함 (불필요한 데이터 중복이 발생할 수 있음)
- 일대일 관계에 필수적으로 참여하는 개체의 릴레이션만 외래키를 받고 관계의 속성을 포함
- 모든 개체가 일대일 관계에 필수적으로 참여하면 릴레이션을 하나로 합친다.
    - 관계의 이름을 릴레이션 이름으로 사용하고 관계에 참여하는 두 개체의 속성들을 관계 릴레이션에 모두 포함
    - 두 개체 릴레이션의 키 속성을 조합하여 관계 릴레이션의 기본키로 지정

#### 규칙5: 다중 값 속성은 릴레이션으로 변환한다.
- 다중 값 속성과 함께 그 속성을 가지고 있던 개체 릴레이션의 기본키를 외래키로 가져와 새로운 릴레이션에 포함
- 새로운 릴레이션의 기본키는 다중 값 속성과 외래키를 조합하여 지정

#### 기타 고려사항
- 모든 관계를 독립적인 릴레이션으로 변환할 수 있다.
    + 속성이 많은 관계는 유형에 상관없이 릴레이션으로의 변환을 고려하자.
- 개체가 자기 자신과 관계를 맺는 순환 관계도 기본 규칙을 그대로 적용
